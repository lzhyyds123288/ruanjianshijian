<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>体育用品销售系统 - 登录</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui-src/dist/css/layui.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <style>
        body {
            background-color: #f5f7fa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-container {
            width: 100%;
            max-width: 420px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .login-header {
            background-color: #1E9FFF;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .login-header h1 {
            font-size: 24px;
            margin: 0;
        }
        .login-body {
            padding: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .layui-form-label {
            width: 70px;
        }
        .layui-input-block {
            margin-left: 100px;
        }
        .login-footer {
            text-align: center;
            margin-top: 15px;
        }
        .login-footer a {
            color: #1E9FFF;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <h1><i class="fa fa-futbol-o"></i> 体育用品销售系统</h1>
        </div>
        <div class="login-body">
            <form  class="layui-form" id="loginForm">
                <div class="form-group">
                    <label class="layui-form-label">用户名</label>
                    <div class="layui-input-block">
                        <input type="text" name="username" lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="form-group">
                    <label class="layui-form-label">密码</label>
                    <div class="layui-input-block">
                        <input type="password" name="password" lay-verify="required" placeholder="请输入密码" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="form-group">
                    <div class="layui-input-block">
                        <input type="checkbox" name="remember" lay-skin="primary" title="记住我">
                    </div>
                </div>
                <div class="form-group">
                    <div class="layui-input-block">
                        <button class="layui-btn layui-btn-normal layui-btn-fluid" lay-submit lay-filter="login">登录</button>
                    </div>
                </div>
                <div class="login-footer">
                    <p>还没有账号？<a href="register.html">立即注册</a></p>
                </div>
            </form>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/layui-src/dist/layui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script>
		layui.use(['form', 'layer'], function() {
		            var form = layui.form;
		            var layer = layui.layer;
		
		            // 尝试从本地存储获取记住的用户信息
		            var rememberUser = localStorage.getItem('rememberUser');
		            if (rememberUser) {
		                var user = JSON.parse(rememberUser);
		                $('input[name="username"]').val(user.username);
		                $('input[name="password"]').val(user.password);
		                $('input[name="remember"]').prop('checked', true);
		                form.render('checkbox');
		            }
					
		            // 登录表单提交
		            form.on('submit(login)', function(data) {
		                // 获取本地存储的用户数据
		                var users = JSON.parse(localStorage.getItem('users') || '[]');
		                var user = users.find(u => u.username === data.field.username && u.password === data.field.password);
		
		                if (user) {
		                    // 保存登录状态
		                    localStorage.setItem('currentUser', JSON.stringify(user));
		                    
		                    // 如果勾选记住我，保存用户信息
		                    if (data.field.remember) {
		                        localStorage.setItem('rememberUser', JSON.stringify({
		                            username: data.field.username,
		                            password: data.field.password
		                        }));
		                    } else {
		                        localStorage.removeItem('rememberUser');
		                    }
		                    layer.msg('登录成功，正在跳转...', {icon: 1}, function() {
		                        window.location.href = 'index.html';
		                    });
		                } else {
		                    layer.msg('用户名或密码错误', {icon: 2});
		                }
		                return false;
		            });
		        });
	</script>
</body>
</html>
